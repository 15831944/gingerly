<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A simple function closures demo</title>
    <link rel="stylesheet" type="text/css" href="assert.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="assert.js"> </script>
    <style>
     #box{
       width: 100px;
       height: 100px;
       position: relative;
       margin:5;
       color: white;
       font-weight: bolder;
       background-color:blue;
       margin-bottom: 100px;
     }
     </style>
  </head>
  <body>
    <div id="box">GO</div>
    <script type="text/javascript">
      function animateIt(elementId) {
        console.log("enter animateIt");
        var elem = document.getElementById(elementId);
        var tick = 0;
        var timer = setInterval(function(){
          console.log('tick :'+  tick);
            if (tick < 100) {
              elem.style.left = elem.style.top = tick + "px";
              tick++;
            }
            else {
              clearInterval(timer);
              assert(tick==100, "Tick accessed via a closure");
              assert(elem, "element accessed via a closure");
              assert(timer, "timer reference obtain via a closure");
            }
        }, 10);
      }

    animateIt('box');
    </script>

  </body>
</html>
